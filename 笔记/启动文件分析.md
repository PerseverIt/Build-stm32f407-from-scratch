# 裸机底层思考：逻辑布局先于物理布局

在传统的 x86 机器（如 Linux 系统）中，通常有系统内核充当“加载器”，将 ELF 格式的可执行文件按照协议，精确地在内存中展开。

但是在裸机（Bare-metal）环境中，并没有操作系统来帮你将程序搬运到 RAM 中。

因此，启动文件的核心职责，就是手动初始化一个极其明确的内存布局模型 —— 这也就是 C 语言运行时的标准模型（.data 搬运、.bss 清零、栈顶初始化等）。它通过引用一个个外部符号（如 _sdata, _edata），强行在代码中规定了必须存在这样一个布局结构。

虽然启动文件在此时已经确定了“逻辑布局”，理论上它完全可以直接把物理地址写死在汇编里。但是，为了实现底层代码与具体芯片硬件的解耦，我们使用了 .ld 链接脚本。

分工如下：

- 启动文件：负责逻辑布局与搬运行为。

- 链接脚本 (.ld)：负责具体的物理映射。在编译的最后阶段，链接器进行重定位（Relocation），将计算好的真实物理地址填入启动文件，最终完成了内存模型的实例化。
